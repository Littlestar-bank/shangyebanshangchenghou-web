(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-sharing-order-refund-apply-apply"],{"41d6":function(t,e,i){var a=i("b58d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("37240af0",a,!0,{sourceMap:!1,shadowMode:!1})},7813:function(t,e,i){"use strict";i.r(e);var a=i("e31e"),o=i("e077");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("fc9c");var n,r=i("f0c5"),d=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"7db30528",null,!1,a["a"],n);e["default"]=d.exports},b58d:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'.container[data-v-7db30528]{font-size:%?28?%}.row-title[data-v-7db30528]{color:#888;margin-bottom:%?20?%}.goods-detail[data-v-7db30528]{padding:%?24?% %?20?%}.goods-detail .left .goods-image[data-v-7db30528]{display:block;width:%?150?%;height:%?150?%}.goods-detail .right[data-v-7db30528]{padding-left:%?20?%}\r\n\r\n/* 服务类型 */.row-service[data-v-7db30528]{padding:%?24?% %?20?%}.service-switch .switch-item[data-v-7db30528]{height:%?38?%;line-height:%?38?%;padding:%?10?% %?30?%;margin-right:%?25?%;border-radius:%?10?%;border:1px solid #b1b1b1;color:#888}.service-switch .switch-item.active[data-v-7db30528]{color:#fc1e56;border:1px solid #fc1e56}\r\n\r\n/* 申请原因 */.row-textarea[data-v-7db30528]{padding:%?24?% %?20?%}.row-textarea uni-textarea[data-v-7db30528]{width:100%;height:%?220?%;padding:%?12?%;border:%?1?% solid #e8e8e8;border-radius:%?5?%;box-sizing:border-box}\r\n\r\n/* 退款金额 */.row-money[data-v-7db30528]{padding:%?24?% %?20?%}.row-money .row-title[data-v-7db30528]{margin-bottom:0;margin-right:%?30?%}\r\n\r\n/* 上传凭证 */.row-voucher[data-v-7db30528]{padding:%?24?% %?20?%}.row-voucher .image-list[data-v-7db30528]:after{clear:both;content:" ";display:table}.row-voucher .image-list uni-image[data-v-7db30528]{display:block;width:%?150?%;height:%?150?%}.row-voucher .image-list .image-picker[data-v-7db30528]{width:%?150?%;height:%?150?%;border:%?1?% dashed #ccc;color:#ccc}.row-voucher .image-list .image-picker .choose__icon[data-v-7db30528]{font-size:%?56?%;margin-bottom:%?6?%}.row-voucher .image-list .image-picker .choose__text[data-v-7db30528]{font-size:%?22?%}.row-voucher .image-list .image-picker[data-v-7db30528], .image-list .image-preview[data-v-7db30528]{margin:%?15?% %?30?% %?15?% 0;float:left}.row-voucher .image-list .image-picker[data-v-7db30528]:nth-child(4n+0),\r\n.row-voucher .image-list .image-preview[data-v-7db30528]:nth-child(4n+0){margin-right:0}.row-voucher .image-list .image-preview[data-v-7db30528]{position:relative}.row-voucher .image-list .image-preview .image-delete[data-v-7db30528]{position:absolute;top:%?-15?%;right:%?-15?%;height:%?42?%;width:%?42?%;line-height:%?42?%;background:rgba(0,0,0,.64);border-radius:50%;color:#fff;font-weight:bolder;font-size:%?22?%;z-index:10;text-align:center}',""]),t.exports=e},b917:function(t,e,i){"use strict";var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("53ca"));i("99af"),i("a434"),i("4160"),i("159b"),i("b64b"),i("1276"),i("ac1f");var s=getApp().globalData,n={components:{},props:{},data:function(){return{order_goods_id:null,detail:{},imageList:[],serviceType:10}},onLoad:function(t){this.order_goods_id=t.order_goods_id,this.getGoodsDetail()},methods:{getGoodsDetail:function(){var t=this;s._get("sharing.refund/apply",{order_goods_id:this.order_goods_id},(function(e){t.setData(e.data)}))},onSwitchService:function(t){s.saveFormId(t.detail.formId),this.setData({serviceType:t.detail.target.dataset.type})},onGoodsDetail:function(t,e){s.saveFormId(t.detail.formId),uni.navigateTo({url:"../../../goods/index?goods_id="+e})},chooseImage:function(t){var e=this,i=this.imageList;s.saveFormId(t.detail.formId),uni.chooseImage({count:6-i.length,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(t){e.setData({imageList:i.concat(t.tempFilePaths)})}})},deleteImage:function(t){var e=t.currentTarget.dataset,i=this.imageList;i.splice(e.imageIndex,1),this.setData({imageList:i})},onSubmit:function(t){var e=this;if(!t.detail.value.content)return s.showError("申请原因不能为空"),!1;if(!0===e.disable)return!1;e.disable=!0,uni.showLoading({title:"正在处理...",mask:!0});var i={order_goods_id:e.order_goods_id,type:e.serviceType,content:t.detail.value.content},a=function(t){console.log("fromPostCall"),s._post_form("sharing.refund/apply",t,(function(t){1===t.code?s.showSuccess(t.msg,(function(){uni.navigateTo({url:"../index"})})):s.showError(t.msg)}),!1,(function(){uni.hideLoading(),e.disable=!1}))},o=e.imageList.length;o>0?e.uploadFile(o,a,i):a(i)},uploadFile:function(t,e,i){var a=[],n=0;this.imageList.forEach((function(r,d){uni.uploadFile({url:s.api_root+"upload/image",filePath:r,name:"iFile",formData:{wxapp_id:s.getWxappId(),token:uni.getStorageSync("token")},success:function(t){var e="object"===(0,o.default)(t.data)?t.data:JSON.parse(t.data);1===e.code&&(a[d]=e.data.file_id)},complete:function(){n++,t===n&&(console.log("upload complete"),i["images"]=a,e&&e(i))}})}))},setData:function(t){var e,i,a=this,o=[];Object.keys(t).forEach((function(s){o=s.split("."),e=t[s],i=a.$data,o.forEach((function(t,s){console.log(t),s+1===o.length?a.$set(i,t,e):i[t]||a.$set(i,t,{}),i=i[t]}))}))}}};e.default=n},e077:function(t,e,i){"use strict";i.r(e);var a=i("b917"),o=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a},e31e:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.detail.order_goods_id?i("v-uni-view",{staticClass:"container p-bottom"},[i("v-uni-form",{attrs:{"report-submit":!0},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubmit.apply(void 0,arguments)}}},[i("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onGoodsDetail(e,t.detail.goods_id)}}},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-id":t.detail.goods_id}},[i("v-uni-view",{staticClass:"goods-detail b-f dis-flex flex-dir-row"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{staticClass:"goods-image",attrs:{src:t.detail.image.file_path}})],1),i("v-uni-view",{staticClass:"right dis-flex flex-box flex-dir-column flex-x-around"},[i("v-uni-view",{staticClass:"goods-name"},[i("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(t.detail.goods_name))])],1),i("v-uni-view",{staticClass:"dis-flex col-9 f-24"},[i("v-uni-view",{staticClass:"flex-box"},[t._v(t._s(t.detail.goods_attr))]),i("v-uni-text",{staticClass:"t-r"},[t._v("×"+t._s(t.detail.total_num))])],1)],1)],1)],1)],1),i("v-uni-view",{staticClass:"row-service b-f m-top20"},[i("v-uni-view",{staticClass:"row-title"},[t._v("服务类型")]),i("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onSwitchService.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"service-switch dis-flex"},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-type":"10"}},[i("v-uni-view",{class:"switch-item "+(10==t.serviceType?"active":"")},[t._v("申请分红")])],1),i("v-uni-button",{staticClass:"btn-normal dis-flex",attrs:{formType:"submit","data-type":"20"}},[i("v-uni-view",{class:"switch-item "+(20==t.serviceType?"active":"")},[t._v("换货")])],1)],1)],1)],1),i("v-uni-view",{staticClass:"row-textarea b-f m-top20"},[i("v-uni-view",{staticClass:"row-title"},[t._v("申请原因")]),i("v-uni-view",{staticClass:"content"},[i("v-uni-textarea",{attrs:{name:"content",maxlength:"2000",placeholder:"请详细填写申请原因，注意保持商品的完好，建议您先与卖家沟通",placeholderStyle:"color:#ccc"}})],1)],1),10==t.serviceType?i("v-uni-view",{staticClass:"row-money b-f m-top20 dis-flex"},[i("v-uni-view",{staticClass:"row-title"},[t._v("分红金额")]),i("v-uni-view",{staticClass:"money col-m"},[t._v("￥"+t._s(t.detail.total_pay_price))])],1):t._e(),i("v-uni-view",{staticClass:"row-voucher b-f m-top20"},[i("v-uni-view",{staticClass:"row-title"},[t._v("上传凭证 (最多6张)")]),i("v-uni-view",{staticClass:"image-list"},[t._l(t.imageList,(function(e,a){return i("v-uni-view",{key:a,staticClass:"image-preview"},[i("v-uni-text",{staticClass:"image-delete iconfont icon-shanchu",attrs:{"data-index":t.index,"data-image-index":a},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.deleteImage.apply(void 0,arguments)}}}),i("v-uni-image",{attrs:{mode:"aspectFill",src:e}})],1)})),t.imageList.length<6?i("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseImage.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[i("v-uni-view",{staticClass:"image-picker dis-flex flex-dir-column flex-x-center flex-y-center"},[i("v-uni-text",{staticClass:"choose__icon iconfont icon-tubiao_xiangji"}),i("v-uni-text",{staticClass:"choose__text"},[t._v("上传图片")])],1)],1)],1):t._e()],2)],1),i("v-uni-view",{staticClass:"flow-fixed-footer b-f"},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[i("v-uni-view",{staticClass:"flow-btn f-32"},[t._v("确认提交")])],1)],1)],1)],1):t._e()},s=[]},fc9c:function(t,e,i){"use strict";var a=i("41d6"),o=i.n(a);o.a}}]);