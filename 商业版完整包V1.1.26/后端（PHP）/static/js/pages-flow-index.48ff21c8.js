(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-flow-index"],{"66f9":function(t,i,e){"use strict";e.r(i);var o=e("b689"),a=e("e0d4");for(var n in a)"default"!==n&&function(t){e.d(i,t,(function(){return a[t]}))}(n);e("8069b");var s,d=e("f0c5"),c=Object(d["a"])(a["default"],o["b"],o["c"],!1,null,"2bf01596",null,!1,o["a"],s);i["default"]=c.exports},"8069b":function(t,i,e){"use strict";var o=e("d4e6"),a=e.n(o);a.a},a12f:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".image[data-v-2bf01596]{width:100%;height:100%}.cart-edit-wrap[data-v-2bf01596]{padding:%?15?%}.cart-tab-item-btn[data-v-2bf01596]{width:%?160?%;display:block;height:%?100?%;line-height:%?100?%;font-size:%?30?%;background:-webkit-linear-gradient(left,#fa1e8c,#fc1e56);background:linear-gradient(90deg,#fa1e8c 0,#fc1e56);color:#fff;float:right;text-align:center}.cart-tab-item[data-v-2bf01596]{width:75%}.cart-tab-item_1[data-v-2bf01596]{width:25%}.cart-tab-wrp[data-v-2bf01596]{height:%?100?%;position:fixed;bottom:%?0?%;background:#fff;border-top:%?1?% solid #ddd;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;width:100%;z-index:10;color:#000}.cart-tab-item[data-v-2bf01596]{overflow:hidden\r\n    /* line-height: 100rpx; */}.cart-tab-item .cart-item-total-price[data-v-2bf01596]{\r\n    /* float: left; */}.cart-item-total[data-v-2bf01596]{padding-left:%?30?%}.cart-item-total-price[data-v-2bf01596]{\r\n    /* color: #ff495e; */\r\n    /* text-align: center; */margin-left:%?15?%}.cart-item-total-price em[data-v-2bf01596]{display:block}.cart-item-icon-wrp[data-v-2bf01596]{width:%?110?%;height:%?90?%;position:absolute;top:%?-4?%}.cart-item-icon[data-v-2bf01596]{width:%?90?%;height:%?90?%}.dish-item[data-v-2bf01596]{width:100%;padding:%?26?% %?20?%;border-bottom:%?1?% solid #eee;position:relative;background:#fff;box-sizing:border-box}.dish-item-radio[data-v-2bf01596]{padding:%?20?% 0}.dish-item-wrp[data-v-2bf01596]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.dish-item-pic[data-v-2bf01596]{width:100%;margin-left:%?12?%}.dish-item-pic uni-image[data-v-2bf01596]{width:%?180?%;height:%?180?%;margin:0 auto;background:#fff;border:%?1?% solid #eee}.dish-item-info[data-v-2bf01596]{padding-left:%?16?%\r\n    /* margin-right: 15px; */ /* width: 68%; */}.dish-item-info .goods-name[data-v-2bf01596]{height:%?80?%}.dish-item-sales[data-v-2bf01596]{color:#ccc;font-size:%?20?%;line-height:%?50?%}.dish-item-money[data-v-2bf01596]{color:#ff495e;font-size:%?32?%\r\n    /* padding: 0 0 10rpx 0; */}.wx-goods_price[data-v-2bf01596]{overflow:hidden}.flow-dete[data-v-2bf01596]{position:absolute;bottom:%?25?%;right:%?30?%}.flow-dete .icon-lajixiang[data-v-2bf01596]{color:#777;font-size:%?34?%}.flow-btn-min[data-v-2bf01596]{background:#fff;border:%?1?% solid #ccc;height:30px;line-height:30px;font-size:%?28?%;width:%?200?%;margin:0 auto;border-radius:5px;text-align:center;color:#777;margin-top:%?25?%}.select-number[data-v-2bf01596]{display:-webkit-box;display:-webkit-flex;display:flex;width:%?202?%;height:%?52?%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;border:%?2?% solid #e7e7e7;border-radius:%?5?%}.select-number .default[data-v-2bf01596]{float:left;width:%?60?%;height:%?52?%;line-height:%?48?%;padding:0;background:#fff;color:#444;font-size:%?40?%;border-radius:unset}.select-number .disabled[data-v-2bf01596]{background:#f7f7f7;color:#ddd}.select-number uni-button[data-v-2bf01596]:after{content:none;border:none}.select-number uni-input[data-v-2bf01596]{float:left;width:%?80?%;height:%?52?%;line-height:%?52?%;border-right:%?1?% solid #eee;border-left:%?1?% solid #eee;text-align:center;font-size:%?28?%;color:#444}",""])},b689:function(t,i,e){"use strict";var o,a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container p-bottom"},[e("v-uni-view",{staticClass:"flow-list"},[t.goods_list.length?e("v-uni-view",[e("v-uni-view",{staticClass:"cart-edit-wrap dis-flex flex-x-end"},["complete"===t.action?e("v-uni-text",{staticClass:"f-30",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.switchAction("edit")}}},[t._v("编辑")]):t._e(),"edit"===t.action?e("v-uni-text",{staticClass:"f-30",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.switchAction("complete")}}},[t._v("完成")]):t._e()],1),t._l(t.goods_list,(function(i,o){return e("v-uni-view",{key:o},[e("v-uni-view",{staticClass:"dish-item dis-flex flex-y-center",style:i.txtStyle,attrs:{"data-index":o}},[e("v-uni-view",{staticClass:"dish-item-radio",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onChecked(o)}}},[e("v-uni-label",{staticClass:"radio"},[e("v-uni-radio",{attrs:{checked:i.checked,color:"#ff495e"}})],1)],1),e("v-uni-view",{staticClass:"dish-item-wrp dis-flex flex-box"},[e("v-uni-navigator",{attrs:{"hover-class":"none",url:"../goods/index?goods_id="+i.goods_id}},[e("v-uni-view",{staticClass:"dish-item-pic"},[e("v-uni-image",{staticClass:"image",attrs:{mode:"aspectFill",src:i.goods_image}})],1)],1),e("v-uni-view",{staticClass:"dish-item-info flex-box"},[e("v-uni-navigator",{attrs:{"hover-class":"none",url:"../goods/index?goods_id="+i.goods_id}},[e("v-uni-view",{staticClass:"goods-name"},[e("v-uni-text",{staticClass:"twolist-hidden f-28 col-3"},[t._v(t._s(i.goods_name))])],1),e("v-uni-view",{staticClass:"goods-attr dis-flex"},[e("v-uni-text",{staticClass:"col-7 f-24"},[t._v(t._s(i.goods_sku.goods_attr))])],1)],1),e("v-uni-view",{staticClass:"dis-flex flex-x-between m-top20"},[e("v-uni-view",{staticClass:"wx-goods_price dis-flex flex-y-center"},[i.is_user_grade?e("v-uni-text",{staticClass:"dish-item-money"},[t._v("￥"+t._s(i.grade_goods_price))]):e("v-uni-text",{staticClass:"dish-item-money"},[t._v("￥"+t._s(i.goods_price))])],1),e("v-uni-view",{staticClass:"select-number"},[e("v-uni-button",{staticClass:"default",class:i.total_num>1?"":"disabled",attrs:{"data-index":o,"data-sku-id":i.goods_sku_id,type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSubCount(o,i.goods_sku_id)}}},[t._v("-")]),e("v-uni-input",{attrs:{bindinput:"import",disabled:!0,type:"number",value:i.total_num}}),e("v-uni-button",{staticClass:"default",attrs:{type:"default"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onAddCount(o,i.goods_sku_id)}}},[t._v("+")])],1)],1)],1)],1)],1)],1)})),e("v-uni-view",{staticClass:"cart-tab-wrp"},[e("v-uni-view",{staticClass:"cart-item-total cart-tab-item dis-flex flex-y-center"},[e("v-uni-view",{staticClass:"checked-all"},[e("v-uni-label",{staticClass:"radio dis-flex flex-y-center",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onCheckedAll.apply(void 0,arguments)}}},[e("v-uni-radio",{staticClass:"margin-right: 10rpx;",attrs:{checked:t.checkedAll,color:"#ff495e"}}),e("v-uni-text",{staticClass:"f-28"},[t._v("全选")])],1)],1),"complete"===t.action?e("v-uni-view",{staticClass:"cart-item-total-price dis-flex"},[e("v-uni-text",{staticClass:"f-28 col-m"},[t._v("合计：￥"+t._s(t.cartTotalPrice))])],1):t._e()],1),e("v-uni-view",{staticClass:"cart-tab-item_1"},["complete"===t.action?e("v-uni-view",{staticClass:"cart-tab-item-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.submit.apply(void 0,arguments)}}},[t._v("去结算")]):t._e(),"edit"===t.action?e("v-uni-view",{staticClass:"cart-tab-item-btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onDelete.apply(void 0,arguments)}}},[t._v("删除")]):t._e()],1)],1)],2):e("v-uni-view",[e("v-uni-view",{staticClass:"shop-notcont"},[e("v-uni-text",{staticClass:"iconfont icon-wushuju"}),e("v-uni-text",{staticClass:"cont"},[t._v("亲，购物车还没有商品哦")]),e("v-uni-view",{staticClass:"flow-btn-min",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goShopping.apply(void 0,arguments)}}},[t._v("去购物")])],1)],1)],1)],1)},n=[];e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return o}))},c354:function(t,i,e){"use strict";var o=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("c5f6"),e("ac6a");var a=o(e("ca00")),n=getApp().globalData,s={components:{},props:{},data:function(){return{goods_list:[],action:"complete",checkedData:[],checkedAll:!1,cartTotalPrice:"0.00",order_total_price:""}},onLoad:function(){uni.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#008000"})},onShow:function(){this.getCartList()},methods:{getCartList:function(){var t=this;n._get("cart/lists",{},(function(i){t._initGoodsCheckedFun(i.data)}))},_initGoodsCheckedFun:function(t){var i=this,e=i.getCheckedData();t.goods_list.forEach((function(t){t.checked=a.default.inArray(t.goods_id+"_"+t.goods_sku_id,e)})),this.goods_list=t.goods_list,this.order_total_price=t.order_total_price,this.action="complete",this.checkedAll=e.length===t.goods_list.length,i.updateTotalPrice()},onChecked:function(t){var i=this,e=i.goods_list[t],o=!e.checked;this.$set(this,["goods_list["+t+"].checked"],o),i.onUpdateChecked(),i.updateTotalPrice(),this.checkedAll=i.getCheckedData().length===i.goods_list.length},getCheckedData:function(){var t=uni.getStorageSync("checkedData");return t||[]},onCheckedAll:function(){var t=this,i=t.goods_list;i.forEach((function(i){i.checked=!t.checkedAll})),this.goods_list=i,this.checkedAll=!t.checkedAll,t.updateTotalPrice(),t.onUpdateChecked()},onUpdateChecked:function(){var t=this,i=[];t.goods_list.forEach((function(t){!0===t.checked&&i.push(t.goods_id+"_"+t.goods_sku_id)})),uni.setStorageSync("checkedData",i)},switchAction:function(t){this.action=t},onDelete:function(){var t=this,i=t.getCheckedIds();if(!i.length)return n.showError("您还没有选择商品"),!1;console.log(i),uni.showModal({title:"提示",content:"您确定要移除选择的商品吗?",success:function(e){e.confirm&&n._post_form("cart/delete",{goods_sku_id:i},(function(){t.onDeleteEvent(i),t.getCartList()}))}})},onDeleteEvent:function(t){var i=this;return t.forEach((function(t){i.goods_list.forEach((function(e,o){t===e.goods_id+"_"+e.goods_sku_id&&i.goods_list.splice(o,1)}))})),i.onUpdateChecked(),!0},getCheckedIds:function(){var t=this,i=[];return t.goods_list.forEach((function(t){!0===t.checked&&i.push(t.goods_id+"_"+t.goods_sku_id)})),i},updateTotalPrice:function(){var t=this,i=0;t.goods_list.forEach((function(e){!0===e.checked&&(i=t.mathadd(i,e.total_price))})),this.cartTotalPrice=Number(i).toFixed(2)},onAddCount:function(t,i){var e=this,o=e.goods_list[t];uni.showLoading({title:"加载中",mask:!0});var a=uni.getStorageSync("referee_id");n._post_form("cart/add",{share_id:a,goods_id:o.goods_id,goods_num:1,goods_sku_id:i},(function(){e.getCartList()}),null,(function(){uni.hideLoading()}))},onSubCount:function(t,i){var e=this,o=e.goods_list[t];o.total_num>1&&(uni.showLoading({title:"加载中",mask:!0}),n._post_form("cart/sub",{goods_id:o.goods_id,goods_sku_id:i},(function(){e.getCartList()}),null,(function(){uni.hideLoading()})))},submit:function(){var t=this,i=t.getCheckedIds();if(!i.length)return n.showError("您还没有选择商品"),!1;uni.navigateTo({url:"../flow/checkout?order_type=cart&cart_ids="+i})},mathadd:function(t,i){return(Number(t)+Number(i)).toFixed(2)},mathsub:function(t,i){return(Number(t)-Number(i)).toFixed(2)},goShopping:function(){uni.switchTab({url:"../index/index"})}}};i.default=s},d4e6:function(t,i,e){var o=e("a12f");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=e("4f06").default;a("e223ba62",o,!0,{sourceMap:!1,shadowMode:!1})},e0d4:function(t,i,e){"use strict";e.r(i);var o=e("c354"),a=e.n(o);for(var n in o)"default"!==n&&function(t){e.d(i,t,(function(){return o[t]}))}(n);i["default"]=a.a}}]);