(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-flow-checkout"],{"4aa6":function(t,e,i){"use strict";i.r(e);var o=i("991c"),a=i("c1e2");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("ca71");var s,r=i("f0c5"),l=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,"682cf89a",null,!1,o["a"],s);e["default"]=l.exports},"7bee":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\r\n\r\n/* 选项卡 */.swiper-tab[data-v-682cf89a]{width:100%;text-align:center;height:%?85?%;background-color:#fff;border-bottom:1px solid #f8f8f8}.swiper-tab .swiper-tab-item[data-v-682cf89a]{width:35%;height:100%;font-size:%?28?%;color:#777;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;box-sizing:border-box;border-bottom:2px solid hsla(0,0%,100%,0)}.swiper-tab .on[data-v-682cf89a]{color:#fd4a5f;border-bottom:2px solid #fd4a5f}\r\n\r\n/* 配送信息 */.flow-delivery[data-v-682cf89a]{padding:%?34?% %?30?%;background:#fff url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANYAAAANCAYAAADVGpDCAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NTc3MiwgMjAxNC8wMS8xMy0xOTo0NDowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3Yjk4M2ExYy1jMDhkLTQ1OTktYTI0Ny1kZjNjYzdiYTQ5ZTgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDQwNkY3RkU5N0NGMTFFNUI3N0M4NTU4MzM2RjlFODIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDQwNkY3RkQ5N0NGMTFFNUI3N0M4NTU4MzM2RjlFODIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTQgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNzgwZWI1NS03OGFhLTQzOTUtODQ4OC1lOWI5YmVlYTY1ZDciIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1OTRiYzUyMy1jMzc3LTExNzgtYTdkZS04NGY3YmM1ZGIxMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz556PLxAAACBElEQVR42tyaSyhEYRTHP48imlKibDQeSSlkSlEWLCRFsZNH5FE2FqQ8ErIRC9lIkTwXSpMkWWChhEJCSnlkoUZGSsr78f98n43CMFPu/Z/6NZuZ2zn33/+cb869XkmLx8IDEQaGQJbgiytQDSY3MyL+LYnL/HxPXSoHDIJQQq2WQQk4Dbbb/yUB29LJ+6e3B66VB3ZITbUIEqSpCGoJBP1ghtBUD6ARpEtTGSEhXzd+awE9oJzQUPegWdf3QlBPMhgDMYRa7YNisGWkpP5qrBQtVBShUHugUE9hs4fUtwG0utlEjRivoA/Ug1sj3vjffr8FNJEK1auPFHcE9UTq5pdK2PwcoAzMG7mjuRrRYEIfK9jiDJSCBZJ6ynSTsBBqNQ0qgdPISbq6vJCFbJOaagrEk5gqWNczRGiqG1Ah1LLMafRkf5pYIUKtZnMJDXUNasAIST2ZYFioRx9ssQaKwJFZEv5uYmWDXVJTrYBEElP562PfPKGpnkAbSDOTqb6aWAGgW6iHol5kQj2CdtAJngnqkc1hHMQRNr9DPaXWzZj8Z2PZtFCxhEIdaKE2CGqRJ4060AH8CLUaALX6f5VpBZLhI9SaeZXQVHKNLt84SCIxVbhQi5YuQlNd6OVElZlN9TGxrGBUn2PZ4lyoTdIsST0FQj0UDSLUak6ot3gcBLVY3wQYAJoVXxmNERajAAAAAElFTkSuQmCC") 0 100% repeat-x;background-size:%?120?% auto}.detail-content[data-v-682cf89a]{padding:0 %?20?%}.detail-content__title[data-v-682cf89a]{margin-bottom:%?6?%}.detail-content .detail-content__title-phone[data-v-682cf89a]{margin-left:%?10?%}.detail-content .detail-content__describe[data-v-682cf89a]{font-size:%?28?%}\r\n\r\n/* 买家留言 */.flow-all-money .ipt-wrapper uni-input[data-v-682cf89a]{width:100%;height:%?75?%}\r\n\r\n/* 商品列表 */.checkout_list[data-v-682cf89a]{padding:%?20?% %?30?% %?4?% %?30?%;background:#fff;border-bottom:%?1?% solid #f8f8f8}.checkout_list .flow-shopList[data-v-682cf89a]{padding:%?5?% 0 %?10?%;border-bottom:%?1?% solid #f8f8f8}.checkout_list .flow-shopList[data-v-682cf89a]:last-child{border-bottom:0}.flow-header-left[data-v-682cf89a]{padding-left:%?90?%}\r\n\r\n/* 会员价 */.flow-shopList .flow-list-right .flow-cont.price-delete[data-v-682cf89a]{font-size:%?26?%;color:#777;text-decoration:line-through}.flow-shopList .grade-price[data-v-682cf89a]{padding-top:%?8?%;font-size:%?28?%;color:#ff495e;text-align:right}\r\n\r\n/* 优惠券选择 */.popup__coupon[data-v-682cf89a]{width:%?750?%;background:#fff;box-sizing:border-box;padding:%?30?%}.popup__coupon .coupon__do_not .control[data-v-682cf89a]{width:90%;height:%?72?%;margin-bottom:%?24?%;color:#888;border:%?1?% solid #e3e3e3;border-radius:%?10?%}.popup__coupon .coupon__title[data-v-682cf89a]{text-align:center;margin-bottom:%?30?%}.popup__coupon .coupon-list .coupon-item[data-v-682cf89a]{position:relative;overflow:hidden;margin-bottom:%?22?%}.popup__coupon .coupon-list .coupon-item .item-wrapper[data-v-682cf89a]{display:-webkit-box;display:-webkit-flex;display:flex;background:#fff;border-radius:%?8?%;color:#fff;height:%?170?%;overflow:hidden}.popup__coupon .coupon-list .coupon-item .item-wrapper .coupon-type[data-v-682cf89a]{position:absolute;top:0;right:0;z-index:10;width:%?128?%;padding:3px 0;background:#a771ff;font-size:%?20?%;text-align:center;color:#fff;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-transform-origin:%?64?% %?64?%;transform-origin:%?64?% %?64?%}.popup__coupon .coupon-list .coupon-item .item-wrapper.color__blue[data-v-682cf89a]{background:-webkit-linear-gradient(215deg,#57bdbf,#2f9de2);background:linear-gradient(-125deg,#57bdbf,#2f9de2)}.popup__coupon .coupon-list .coupon-item .item-wrapper.color__red[data-v-682cf89a]{background:-webkit-linear-gradient(218deg,#ff6d6d,#ff3636);background:linear-gradient(-128deg,#ff6d6d,#ff3636)}.popup__coupon .coupon-list .coupon-item .item-wrapper.color__violet[data-v-682cf89a]{background:-webkit-linear-gradient(203deg,#ef86ff,#b66ff5);background:linear-gradient(-113deg,#ef86ff,#b66ff5)}.popup__coupon .coupon-list .coupon-item .item-wrapper.color__violet .coupon-type[data-v-682cf89a]{background:#55b5ff}.popup__coupon .coupon-list .coupon-item .item-wrapper.color__yellow[data-v-682cf89a]{background:-webkit-linear-gradient(231deg,#f7d059,#fdb054);background:linear-gradient(-141deg,#f7d059,#fdb054)}.popup__coupon .coupon-list .coupon-item .item-wrapper .tip[data-v-682cf89a]{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 32%;flex:0 0 32%;text-align:center;border-radius:8px 0 0 8px}.popup__coupon .coupon-list .coupon-item .item-wrapper .tip .money[data-v-682cf89a]{font-weight:700;font-size:%?46?%}.popup__coupon .coupon-list .coupon-item .item-wrapper .tip .pay-line[data-v-682cf89a]{font-size:%?22?%}.popup__coupon .coupon-list .coupon-item .item-wrapper .split-line[data-v-682cf89a]{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 0;flex:0 0 0;border-left:%?4?% solid #fff;margin:0 5px 0 3px;background:#fff}.popup__coupon .coupon-list .coupon-item .item-wrapper .split-line[data-v-682cf89a]:before,\r\n.popup__coupon .coupon-list .coupon-item .item-wrapper .split-line[data-v-682cf89a]:after{content:"";position:absolute;width:12px;height:6px;background:#fff;left:-7px;z-index:1}.popup__coupon .coupon-list .coupon-item .item-wrapper .split-line[data-v-682cf89a]:before{border-radius:0 0 8px 8px;top:0}.popup__coupon .coupon-list .coupon-item .item-wrapper .split-line[data-v-682cf89a]:after{border-radius:8px 8px 0 0;bottom:0}.popup__coupon .coupon-list .coupon-item .item-wrapper .content[data-v-682cf89a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;padding:%?30?% %?20?%;border-radius:8px 0 0 8px}.popup__coupon .coupon-list .coupon-item .item-wrapper .content .title[data-v-682cf89a]{font-size:%?34?%}.popup__coupon .coupon-list .coupon-item .item-wrapper .content .bottom .time[data-v-682cf89a]{font-size:%?24?%;line-height:%?24?%}.popup__coupon .coupon-list .coupon-item .item-wrapper .content .bottom .state[data-v-682cf89a]{height:%?46?%;width:%?122?%;line-height:%?92?%;text-align:center;color:#fff;font-size:%?26?%}\r\n\r\n/* 积分抵扣 */.points .title[data-v-682cf89a]{margin-right:%?5?%}.points .icon-help[data-v-682cf89a]{font-size:%?28?%}.points .points-money[data-v-682cf89a]{margin-right:%?20?%}\r\n\r\n/* 支付方式 */.pay-method .pay-item[data-v-682cf89a]{padding:%?20?% 0;font-size:%?28?%;border-bottom:%?1?% solid #f8f8f8}.pay-method .pay-item .item-left_icon[data-v-682cf89a]{margin-right:%?20?%;font-size:%?32?%}.pay-method .pay-item .item-left_icon.wechat[data-v-682cf89a]{color:#00c800}.pay-method .pay-item .item-left_icon.balance[data-v-682cf89a]{color:#ff9700}\r\n\r\n/* 门店自提联系人 */.flow-extract-contact[data-v-682cf89a]{padding:%?8?% %?24?%;font-size:%?28?%;color:#444}.flow-extract-contact .contact-item[data-v-682cf89a]{padding:%?10?% 0;border-bottom:%?1?% solid #f8f8f8}.flow-extract-contact .contact-item[data-v-682cf89a]:last-child{border-bottom:none}.flow-extract-contact .item_label[data-v-682cf89a]{margin-right:%?26?%;width:%?150?%}.flow-extract-contact .item_ipt uni-input[data-v-682cf89a]{font-size:%?28?%;width:100%}.flow-extract-contact .item_ipt .input-placeholder[data-v-682cf89a]{font-size:%?28?%}',""]),t.exports=e},"991c":function(t,e,i){"use strict";var o;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.goods_list&&t.goods_list.length?i("v-uni-view",{staticClass:"container p-bottom"},[t.isShowTab?i("v-uni-view",{staticClass:"swiper-tab dis-flex flex-y-center flex-x-around"},t._l(t.DeliveryTypeEnum,(function(e,o){return i("v-uni-view",{key:o,class:"swiper-tab-item "+(t.curDelivery==e.value?"on":""),attrs:{"data-current":e.value},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onSwichDelivery.apply(void 0,arguments)}}},[t._v(t._s(e.name))])})),1):t._e(),t.curDelivery==t.DeliveryTypeEnum.EXPRESS.value?i("v-uni-view",{staticClass:"flow-delivery",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onSelectAddress.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"flow-delivery__detail dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"detail-location dis-flex"},[i("v-uni-text",{staticClass:"iconfont icon-dingwei"})],1),i("v-uni-view",{staticClass:"detail-content flex-box"},[t.address&&t.address.address_id?[i("v-uni-view",{staticClass:"detail-content__title dis-flex"},[i("v-uni-text",{staticClass:"f-30"},[t._v(t._s(t.address.name))]),i("v-uni-text",{staticClass:"detail-content__title-phone f-28"},[t._v(t._s(t.address.phone))])],1),i("v-uni-view",{staticClass:"detail-content__describe"},[i("v-uni-text",{staticClass:"col-7"},[t._v(t._s(t.address.region.province)+" "+t._s(t.address.region.city)+" "+t._s(t.address.region.region)+" "+t._s(t.address.detail))])],1)]:[i("v-uni-view",{staticClass:"detail-content__describe dis-flex"},[i("v-uni-text",{staticClass:"col-6"},[t._v("请选择配送地址")])],1)]],2),i("v-uni-view",{staticClass:"detail-arrow dis-flex"},[i("v-uni-text",{staticClass:"iconfont icon-xiangyoujiantou user-orderJtou"})],1)],1)],1):t._e(),t.curDelivery==t.DeliveryTypeEnum.EXTRACT.value?[i("v-uni-view",{staticClass:"flow-delivery",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onSelectExtractPoint.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"flow-delivery__detail dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"detail-location dis-flex"},[i("v-uni-text",{staticClass:"iconfont icon-dingwei"})],1),i("v-uni-view",{staticClass:"detail-content flex-box"},[t.extract_shop.shop_id?[i("v-uni-view",{staticClass:"detail-content__title dis-flex"},[i("v-uni-text",{staticClass:"f-30"},[t._v(t._s(t.extract_shop.shop_name))])],1),i("v-uni-view",{staticClass:"detail-content__describe"},[i("v-uni-text",{staticClass:"col-7"},[t._v(t._s(t.extract_shop.region.province)+" "+t._s(t.extract_shop.region.city)+" "+t._s(t.extract_shop.region.region)+"\n                                "+t._s(t.extract_shop.address))])],1)]:[i("v-uni-view",{staticClass:"detail-content__describe dis-flex"},[i("v-uni-text",{staticClass:"col-6"},[t._v("请选择自提点")])],1)]],2),i("v-uni-view",{staticClass:"detail-arrow dis-flex"},[i("v-uni-text",{staticClass:"iconfont icon-xiangyoujiantou user-orderJtou"})],1)],1)],1),i("v-uni-view",{staticClass:"flow-extract-contact m-top20 b-f"},[i("v-uni-view",{staticClass:"contact-item dis-flex"},[i("v-uni-view",{staticClass:"item_label dis-flex flex-x-end flex-y-center"},[i("v-uni-text",[t._v("联系人：")])],1),i("v-uni-view",{staticClass:"item_ipt flex-box dis-flex flex-y-center"},[i("v-uni-input",{attrs:{placeholder:"请填写联系人姓名",value:t.linkman},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInputLinkman.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"contact-item dis-flex"},[i("v-uni-view",{staticClass:"item_label dis-flex flex-x-end flex-y-center"},[i("v-uni-text",[t._v("联系电话：")])],1),i("v-uni-view",{staticClass:"item_ipt flex-box dis-flex flex-y-center"},[i("v-uni-input",{attrs:{placeholder:"请填写联系电话",value:t.phone},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onInputPhone.apply(void 0,arguments)}}})],1)],1)],1)]:t._e(),i("v-uni-view",{staticClass:"m-top20"},[t._l(t.goods_list,(function(e,o){return i("v-uni-view",{key:o,staticClass:"checkout_list"},[i("v-uni-form",{attrs:{"data-id":e.goods_id,"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onTargetGoods.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[i("v-uni-view",{staticClass:"flow-shopList dis-flex",attrs:{"data-index":o}},[i("v-uni-view",{staticClass:"flow-list-left"},[i("v-uni-image",{attrs:{mode:"scaleToFill",src:e.goods_image}})],1),i("v-uni-view",{staticClass:"flow-list-right flex-box"},[i("v-uni-text",{staticClass:"f-30 col-3 twolist-hidden"},[t._v(t._s(e.goods_name))]),i("v-uni-text",{staticClass:"f-24 col-7"},[t._v(t._s(e.goods_sku.goods_attr))]),i("v-uni-view",{staticClass:"flow-list-cont dis-flex flex-x-between flex-y-center"},[i("v-uni-text",{staticClass:"small"},[t._v("×"+t._s(e.total_num))]),i("v-uni-text",{class:"flow-cont "+(e.is_user_grade?"price-delete":"")},[t._v("￥"+t._s(e.goods_price))])],1),e.is_user_grade?i("v-uni-view",{staticClass:"grade-price"},[i("v-uni-text",[t._v("会员折扣价：￥"+t._s(e.grade_goods_price))])],1):t._e()],1)],1)],1)],1)],1)})),i("v-uni-view",{staticClass:"flow-num-box b-f padding-box"},[i("v-uni-text",[t._v("共"+t._s(t.order_total_num)+"件商品，合计：")]),i("v-uni-text",{staticClass:"flow-money col-m"},[t._v("￥"+t._s(t.order_total_price))])],1)],2),i("v-uni-view",{staticClass:"flow-all-money b-f m-top20"},[i("v-uni-view",{staticClass:"flow-all-list dis-flex"},[i("v-uni-text",{staticClass:"flex-five"},[t._v("订单总金额：")]),i("v-uni-view",{staticClass:"flex-five t-r"},[i("v-uni-text",{staticClass:"col-m"},[t._v("￥"+t._s(t.order_total_price))])],1)],1),t.is_allow_points?i("v-uni-view",{staticClass:"points flow-all-list dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"block-left flex-five"},[i("v-uni-form",{staticClass:"flex-five",attrs:{"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onShowPoints.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[i("v-uni-text",{staticClass:"title"},[t._v("可用"+t._s(t.setting.points_name)+"抵扣：")]),i("v-uni-text",{staticClass:"iconfont icon-help"})],1)],1)],1),i("v-uni-view",{staticClass:"flex-five dis-flex flex-x-end flex-y-center"},[i("v-uni-text",{staticClass:"points-money col-m"},[t._v("￥"+t._s(t.points_money))]),i("van-switch",{attrs:{checked:t.isUsePoints,size:"48rpx","active-color":"#07c160"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onTriggerPoints.apply(void 0,arguments)}}})],1)],1):t._e(),t.curDelivery==t.DeliveryTypeEnum.EXPRESS.value?i("v-uni-view",{staticClass:"dis-flex flow-all-list"},[i("v-uni-text",{staticClass:"flex-five"},[t._v("配送费用：")]),i("v-uni-view",{staticClass:"flex-five t-r"},[t.address&&t.address.address_id?i("v-uni-view",[t.intra_region?i("v-uni-text",{staticClass:"col-m"},[t._v("+￥"+t._s(t.express_price))]):i("v-uni-text",[t._v("不在配送范围")])],1):i("v-uni-view",[i("v-uni-text",{staticClass:"col-7"},[t._v("请先选择配送地址")])],1)],1)],1):t._e()],1),i("v-uni-view",{staticClass:"pay-method flow-all-money b-f m-top20"},[i("v-uni-view",{staticClass:"flow-all-list dis-flex"},[i("v-uni-text",{staticClass:"flex-five"},[t._v("支付方式")])],1),i("v-uni-form",{attrs:{"data-value":t.PayTypeEnum.WECHAT.value,"report-submit":"true"},on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.onSelectPayType.apply(void 0,arguments)}}},[i("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[i("v-uni-view",{staticClass:"pay-item dis-flex flex-x-between"},[i("v-uni-view",{staticClass:"item-left dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"item-left_icon wechat"},[i("v-uni-text",{staticClass:"iconfont icon-weixinzhifu"})],1),i("v-uni-view",{staticClass:"item-left_text"},[i("v-uni-text",[t._v(t._s(t.PayTypeEnum.WECHAT.name))])],1)],1),t.curPayType==t.PayTypeEnum.WECHAT.value?i("v-uni-view",{staticClass:"item-right col-m"},[i("v-uni-text",{staticClass:"iconfont icon-duihao"})],1):t._e()],1)],1)],1)],1),i("v-uni-view",{staticClass:"flow-all-money b-f m-top20"},[i("v-uni-view",{staticClass:"ipt-wrapper dis-flex flow-all-list"},[i("v-uni-input",{attrs:{placeholder:"选填：买家留言（50字以内）",value:t.remark},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.bindRemark.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"flow-fixed-footer b-f m-top10"},[i("v-uni-view",{staticClass:"dis-flex chackout-box"},[i("v-uni-view",{staticClass:"chackout-left pl-12"},[t._v("实付款："),i("v-uni-text",{staticClass:"col-m"},[t._v("￥"+t._s(t.order_pay_price))])],1),i("v-uni-view",{staticClass:"chackout-right",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onSubmitOrder.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"flow-btn f-32"},[t._v("提交订单")])],1)],1)],1),i("zan-popup",{attrs:{show:t.showBottomPopup,type:"bottom"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.onTogglePopupCoupon.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"popup__coupon"},[i("v-uni-view",{staticClass:"coupon__title f-32"},[t._v("选择优惠券")]),i("v-uni-view",{staticClass:"coupon-list"},[i("v-uni-scroll-view",{staticStyle:{height:"565rpx"},attrs:{"scroll-y":"true"}},t._l(t.coupon_list,(function(e,o){return i("v-uni-view",{key:o,staticClass:"coupon-item"},[i("v-uni-view",{class:"item-wrapper color__"+e.color.text,attrs:{"data-index":o,"data-id":e.user_coupon_id},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onSelectCoupon.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"coupon-type"},[t._v(t._s(e.coupon_type.text))]),i("v-uni-view",{staticClass:"tip dis-flex flex-dir-column flex-x-center"},[10==e.coupon_type.value?i("v-uni-view",[i("v-uni-text",{staticClass:"f-30"},[t._v("￥")]),i("v-uni-text",{staticClass:"money"},[t._v(t._s(e.reduce_price))])],1):t._e(),20==e.coupon_type.value?i("v-uni-text",{staticClass:"money"},[t._v(t._s(e.discount)+"折")]):t._e(),i("v-uni-text",{staticClass:"pay-line"},[t._v("满"+t._s(e.min_price)+"元可用")])],1),i("v-uni-view",{staticClass:"split-line"}),i("v-uni-view",{staticClass:"content dis-flex flex-dir-column flex-x-between"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"bottom dis-flex flex-y-center"},[i("v-uni-view",{staticClass:"time flex-box"},[i("v-uni-text",[t._v("有效期："+t._s(e.start_time.text)+"~"+t._s(e.end_time.text))])],1)],1)],1)],1)],1)})),1)],1),i("v-uni-view",{staticClass:"coupon__do_not dis-flex flex-y-center flex-x-center"},[i("v-uni-view",{staticClass:"control dis-flex flex-y-center flex-x-center",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.onNotUseCoupon.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"f-26"},[t._v("不使用优惠券")])],1)],1)],1)],1),i("zan-dialog",{attrs:{id:"zan-base-dialog"}})],2):t._e()},n=[]},"9cce":function(t,e,i){"use strict";var o=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a9e3"),i("498a"),i("4160"),i("159b"),i("b64b"),i("1276"),i("ac1f");var a=o(i("04b8")),n=o(i("cda5")),s=o(i("e62b")),r=o(i("7740")),l=o(i("26e2")),c=o(i("bf46")),d=o(i("f402")),u=getApp().globalData,p={components:{zanPopup:l.default,zanDialog:c.default,vanSwitch:d.default},props:{},data:function(){return{options:{},setting:{delivery:[]},isShowTab:!1,DeliveryTypeEnum:n.default,curDelivery:null,PayTypeEnum:s.default,curPayType:s.default.WECHAT.value,address:null,exist_address:!1,selectedShopId:0,linkman:"",phone:"",goods:{},selectCouponId:0,isUsePoints:!1,remark:"",disabled:!1,hasError:!1,error:"",showBottomPopup:!1,notRefresh:!1,goods_list:[],order_total_num:null,coupon_list:null,has_error:null,error_msg:null,delivery:null,express_price:null,intra_region:null,extract_shop:null,is_allow_points:null,is_use_points:null,points_money:null,points_bonus:null,pay_type:null,last_extract:null,deliverySetting:null,order_total_price:null,coupon_id:null,coupon_money:null,order_price:null,order_pay_price:null}},onLoad:function(t){var e=this;e.options=t},onShow:function(){this.notRefresh||this.getOrderData()},methods:{getOrderData:function(){var t=this,e=t.options,i=function(e){var i=e.data;if(1!==e.code)return u.showError(e.msg),!1;i.has_error?(t.hasError=!0,t.error=i.error_msg,u.showError(t.error)):(t.hasError=!1,t.error="");var o={};o.curDelivery=i.delivery,o.isShowTab=i.setting.delivery.length>1,""===t.linkman&&(o.linkman=i.last_extract.linkman),""===t.phone&&(o.phone=i.last_extract.phone),t.setData(Object.assign({},i,o)),uni.hideLoading()};uni.showLoading({title:"加载中..."});var o={delivery:t.curDelivery||0,shop_id:t.selectedShopId||0,coupon_id:t.selectCouponId||0,is_use_points:t.isUsePoints?1:0};"buyNow"===e.order_type?u._get("order/buyNow",Object.assign({},o,{goods_id:e.goods_id,goods_num:e.goods_num,goods_sku_id:e.goods_sku_id}),(function(t){i(t)})):"bargain"===e.order_type?u._get("bargain.order/checkout",Object.assign({},o,{task_id:e.task_id,goods_sku_id:e.goods_sku_id}),(function(t){i(t)})):"cart"===e.order_type&&u._get("order/cart",Object.assign({},o,{cart_ids:e.cart_ids||0}),(function(t){i(t)}))},onSwichDelivery:function(t){var e=t.currentTarget.dataset.current;this.setData({curDelivery:e}),this.getOrderData()},onSelectAddress:function(){this.setData({notRefresh:!1}),uni.navigateTo({url:"../address/"+(this.exist_address?"index?from=flow":"create")})},onSelectExtractPoint:function(){var t=this,e=this.selectedShopId;this.setData({notRefresh:!1}),uni.navigateTo({url:"../_select/extract_point/index?selected_id="+e,events:{someEvent:function(e){t.setData({selectedShopId:e.data})}},success:function(t){t.eventChannel.emit("acceptDataFromOpenerPage",{data:"test"})}})},onTargetGoods:function(t){uni.navigateTo({url:"../goods/index?goods_id="+t.currentTarget.dataset.id})},onSubmitOrder:function(){var t=this,e=t.options;if(t.disabled)return!1;if(!t._onVerifyFun())return!1;t.disabled=!0;var i=uni.getStorageSync("referee_id"),o="",a={share_id:i,delivery:t.curDelivery,pay_type:t.curPayType,shop_id:t.selectedShopId||0,linkman:t.linkman,phone:t.phone,coupon_id:t.selectCouponId||0,is_use_points:t.isUsePoints?1:0,remark:t.remark||""};"buyNow"===e.order_type&&(o="order/buyNow",a=Object.assign(a,{goods_id:e.goods_id,goods_num:e.goods_num,goods_sku_id:e.goods_sku_id})),"cart"===e.order_type&&(o="order/cart",a=Object.assign(a,{cart_ids:e.cart_ids||0})),"bargain"===e.order_type&&(o="bargain.order/checkout",a=Object.assign(a,{task_id:e.task_id,goods_sku_id:e.goods_sku_id}));var n=function(){uni.showLoading({title:"正在处理..."}),u._post_form(o,a,(function(e){t._onSubmitCallback(e)}),(function(){}),(function(){uni.hideLoading(),t.disabled=!1})),t.setData({notRefresh:!0})};n()},_onRequestSubscribeMessage:function(t){var e=this,i=e.setting.order_submsg;0!==i.length?uni.requestSubscribeMessage({tmplIds:i,success:function(){},fail:function(){},complete:function(){t()}}):t()},_onSubmitCallback:function(t){var e=this;if(-10===t.code)return u.showError(t.msg,(function(){e.redirectToOrderIndex()})),!1;Number(t.data.pay_type)===s.default.WECHAT.value&&u.wxPayment({payment:t.data.payment,success:function(){e.redirectToOrderIndex()},fail:function(){u.showError(t.msg.error,(function(){e.redirectToOrderIndex()}))}}),Number(t.data.pay_type)===s.default.BALANCE.value&&u.showSuccess(t.msg.success,(function(){e.redirectToOrderIndex()}))},_onVerifyFun:function(){var t=this;if(t.hasError)return u.showError(t.error),!1;if(t.curDelivery===n.default.EXTRACT.value){if(t.setData({linkman:t.linkman.trim(),phone:t.phone.trim()}),t.selectedShopId<=0)return u.showError("请选择自提的门店"),!1;if(a.default.isEmpty(t.linkman))return u.showError("请填写自提联系人"),!1;if(a.default.isEmpty(t.phone))return u.showError("请填写自提联系电话"),!1;if(!a.default.isPhone(t.phone))return u.showError("请输入正确的联系电话"),!1}return!0},bindRemark:function(t){var e=this;e.setData({remark:t.detail.value})},onTogglePopupCoupon:function(){var t=this;t.coupon_list.length>0&&t.setData({showBottomPopup:!t.showBottomPopup})},onSelectCoupon:function(t){var e=this;e.setData({selectCouponId:t.currentTarget.dataset.id}),e.getOrderData(),e.onTogglePopupCoupon()},onNotUseCoupon:function(){var t=this;t.setData({selectCouponId:0}),t.getOrderData(),t.onTogglePopupCoupon()},onSelectPayType:function(t){var e=this;u.saveFormId(t.detail.formId),e.setData({curPayType:t.currentTarget.dataset.value})},redirectToOrderIndex:function(){uni.redirectTo({url:"../order/index"})},onInputLinkman:function(t){var e=this;e.setData({linkman:t.detail.value})},onInputPhone:function(t){var e=this;e.setData({phone:t.detail.value})},onTriggerPoints:function(t){var e=t.detail,i=this;i.setData({isUsePoints:e}),i.getOrderData()},onShowPoints:function(t){var e=this;u.saveFormId(t.detail.formId);var i=e.setting;(0,r.default)({title:i.points_name+"说明",message:i.points_describe,selector:"#zan-base-dialog",isScroll:!0,buttons:[{text:"关闭",color:"red",type:"cash"}]})},setData:function(t){var e,i,o=this,a=[];Object.keys(t).forEach((function(n){a=n.split("."),e=t[n],i=o.$data,a.forEach((function(t,n){console.log(t),n+1===a.length?o.$set(i,t,e):i[t]||o.$set(i,t,{}),i=i[t]}))}))}}};e.default=p},c1e2:function(t,e,i){"use strict";i.r(e);var o=i("9cce"),a=i.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(n);e["default"]=a.a},c9d7:function(t,e,i){var o=i("7bee");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var a=i("4f06").default;a("20bec4be",o,!0,{sourceMap:!1,shadowMode:!1})},ca71:function(t,e,i){"use strict";var o=i("c9d7"),a=i.n(o);a.a}}]);