(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bargain-task-index"],{"0e2e":function(t,i,e){"use strict";var a=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("4160"),e("159b"),e("b64b"),e("1276"),e("ac1f");var n=e("787c"),s=a(e("ca00")),o=a(e("c61e")),r=a(e("7740")),d=a(e("bf46")),c=getApp().globalData,l={components:{zanDialog:d.default},props:{},data:function(){return{taskEndTime:[],task:{},active:{},goods:{},help_list:[],is_creater:!1,is_cut:!1,setting:{},showBuyBtn:!1,showShareBtn:!1,showCatBtn:!1,showOtherBtn:!1,task_id:"",disabled:!1,title:null,desc:null,imgUrl:null}},onLoad:function(t){this.setData({task_id:t.task_id}),(0,n.getJSSDK)(c,window.location.href)},onShow:function(){this.getTaskDetail()},onShareAppMessage:function(){var t=c.getShareUrlParams({task_id:this.task_id});return{title:this.active.share_title,path:"/pages/bargain/task/index?"+t}},methods:{getTaskDetail:function(){var t=this;c._get("bargain.task/detail",{task_id:this.task_id},(function(i){t._initDataFun(i.data)}))},_initDataFun:function(t){this._initShowBtnFun(t),t.taskEndTime=[{date:t.task.end_time}],this.setData(t),t.task.is_end||o.default.onSetTimeList(this,"taskEndTime");var i=c.getShareUrlParams({task_id:this.task_id});(0,n.wxShare)({title:this.title||this.active.share_title,desc:this.desc||this.active.share_title,link:c.domain+"#/pages/bargain/task/index?"+i,imgUrl:this.imgUrl||"",callback:function(){}})},_initShowBtnFun:function(t){var i=t.is_creater&&!t.task.is_buy&&t.task.status&&(!t.active.is_floor_buy||t.task.is_floor),e=!t.is_creater&&!t.is_cut&&!t.task.is_floor&&t.task.status,a=!e&&!t.task.is_floor&&t.task.status,n=!i&&!a&&!e;this.setData({showBuyBtn:i,showShareBtn:a,showCatBtn:e,showOtherBtn:n})},onTargetHome:function(t){c.saveFormId(t.detail.formId),uni.switchTab({url:"../../index/index"})},onToggleRules:function(t){c.saveFormId(t.detail.formId),(0,r.default)({title:"砍价规则",message:this.setting.bargain_rules,selector:"#zan-base-dialog",isScroll:!0,buttons:[{text:"关闭",color:"red",type:"cash"}]})},onTargetGoods:function(t){c.saveFormId(t.detail.formId),uni.navigateTo({url:"../goods/index?active_id="+this.task.active_id})},onTargetBargain:function(t){c.saveFormId(t.detail.formId),uni.navigateTo({url:"../index/index"})},onHelpCut:function(t){var i=this;if(c.saveFormId(t.detail.formId),!0===this.disabled)return!1;this.setData({disabled:!0}),c._post_form("bargain.task/help_cut",{task_id:this.task_id},(function(t){c.showSuccess(t.msg,(function(){uni.navigateBack()})),i.getTaskDetail()}),!1,(function(){i.setData({disabled:!1})}))},onCheckout:function(t){c.saveFormId(t.detail.formId);var i=s.default.urlEncode({order_type:"bargain",task_id:this.task.task_id,goods_sku_id:this.task.spec_sku_id});uni.navigateTo({url:"../../flow/checkout?"+i})},setData:function(t){var i,e,a=this,n=[];Object.keys(t).forEach((function(s){n=s.split("."),i=t[s],e=a.$data,n.forEach((function(t,s){console.log(t),s+1===n.length?a.$set(e,t,i):e[t]||a.$set(e,t,{}),e=e[t]}))}))}}};i.default=l},"4d83":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'uni-page-body[data-v-d176390c]{height:100%}.container[data-v-d176390c]{background:url(https://si.geilicdn.com/img-310900000167962321710a026860-unadjust_750_686.png) top no-repeat,-webkit-linear-gradient(left,#fea044,#f9565d 63%,#e63378);background:url(https://si.geilicdn.com/img-310900000167962321710a026860-unadjust_750_686.png) top no-repeat,linear-gradient(90deg,#fea044,#f9565d 63%,#e63378);background-size:100% auto;min-height:100%}\r\n\r\n/* 头部区域 */.header[data-v-d176390c]{padding:%?30?% %?30?%}.header .item-touch[data-v-d176390c]{color:#fff;font-size:%?24?%;padding:%?7?% %?20?%;background:rgba(0,0,0,.17);border-radius:%?22?%}\r\n\r\n/* 内容区域 */.content[data-v-d176390c]{position:relative;box-sizing:border-box;padding:%?10?% %?30?% %?60?% %?30?%}\r\n\r\n/* 砍价信息 */.infos-wrap[data-v-d176390c]{background:#fff;box-shadow:0 %?4?% %?40?% 0 rgba(144,52,52,.1);padding:0 %?30?% %?40?%;border-radius:%?16?%}.infos-top[data-v-d176390c]{position:relative;top:%?-42?%;margin-bottom:%?-22?%}.infos-img[data-v-d176390c]{width:%?120?%;height:%?120?%;padding:%?8?%;background:#fff;overflow:hidden;margin:0 auto;border-radius:50%}.infos-img uni-image[data-v-d176390c]{width:100%;height:100%;border-radius:50%}.infos-name[data-v-d176390c]{margin:%?8?% auto 0;width:80%;font-size:%?26?%;color:#9a9a9a;text-align:center;line-height:%?32?%}.infos-prompt[data-v-d176390c]{text-align:center;font-size:%?30?%;color:#222;line-height:%?48?%;margin-bottom:%?30?%}.infos-item[data-v-d176390c]{margin-top:%?40?%;display:-webkit-box;display:-webkit-flex;display:flex}.infos-item-img[data-v-d176390c]{-webkit-box-flex:0;-webkit-flex:none;flex:none;width:%?180?%;height:%?180?%}.infos-item-img uni-image[data-v-d176390c]{width:100%;height:100%}.infos-item-info[data-v-d176390c]{margin-left:%?25?%;-webkit-box-flex:1;-webkit-flex:auto;flex:auto}.infos-item-name[data-v-d176390c]{font-size:%?28?%;color:#404040;line-height:%?40?%;height:%?80?%}.infos-item-stock[data-v-d176390c]{\r\n  /* margin-top: 8rpx; */}.infos-item-stock .stock-widget[data-v-d176390c]{display:inline-block;min-width:%?100?%;padding:0 %?20?%;background-image:-webkit-linear-gradient(right,#fe9c3f,#fb6253 99%);background-image:linear-gradient(-90deg,#fe9c3f,#fb6253 99%);border-radius:%?40?%;height:%?40?%;font-size:%?24?%;color:#fff;line-height:%?40?%}.infos-item-price[data-v-d176390c]{font-size:0;margin-top:%?12?%}.infos-item-price .price1[data-v-d176390c]{font-size:%?24?%;line-height:%?32?%}.infos-item-price .price2[data-v-d176390c]{margin-left:%?4?%;font-size:%?36?%;line-height:%?40?%}.infos-item-price .price3[data-v-d176390c]{margin-left:%?10?%;font-size:%?24?%;color:#9a9a9a;line-height:%?32?%;text-decoration:line-through}\r\n\r\n/* 分割线 */.connect[data-v-d176390c]{position:relative;height:%?20?%}.connect-ring[data-v-d176390c]{position:absolute;top:%?-28?%;height:%?76?%;width:%?20?%;padding:%?8?% %?6?%;box-sizing:border-box}.connect-ring uni-text[data-v-d176390c]{position:relative;z-index:8;display:block;height:100%;width:100%;background:#fff;border-radius:%?20?%}.connect-ring[data-v-d176390c]:after, .connect-ring[data-v-d176390c]:before{content:"";position:absolute;z-index:6;left:0;height:%?20?%;width:%?20?%;border-radius:%?20?%}.connect-ring.bgf-ring--left[data-v-d176390c]{left:%?20?%}.connect-ring.bgf-ring--left[data-v-d176390c]:before{top:0;background:#f4914e}.connect-ring.bgf-ring--left[data-v-d176390c]:after{bottom:0;background:#f4914e}.connect-ring.bgf-ring--right[data-v-d176390c]{right:%?20?%}.connect-ring.bgf-ring--right[data-v-d176390c]:before{top:0;background:#e03e71}.connect-ring.bgf-ring--right[data-v-d176390c]:after{bottom:0;background:#e03e71}\r\n\r\n/* 砍价进度 */.bargain-wrap[data-v-d176390c]{position:relative;background:#fff;padding:%?40?% %?30?% %?30?%;box-shadow:0 %?4?% %?40?% 0 rgba(144,52,52,.1);border-radius:%?16?%}.bargain-info[data-v-d176390c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?28?%;color:#404040;line-height:%?40?%}.bargain-info .focal[data-v-d176390c]{margin:0 %?5?%}.bargain-p[data-v-d176390c]{margin-top:%?40?%;min-height:%?32?%}.bargain-people[data-v-d176390c]{font-size:%?24?%;color:#9a9a9a;text-align:center;line-height:%?32?%}\r\n\r\n/* 进度条 */.bgn__process[data-v-d176390c]{position:relative;padding:%?30?% 0}.bgn__process-bottom[data-v-d176390c]{z-index:1;overflow:hidden;background-image:-webkit-linear-gradient(bottom,#f0f2f7,#e8ebf3);background-image:linear-gradient(0deg,#f0f2f7,#e8ebf3)}.bgn__process-bottom[data-v-d176390c], .bgn__process-process[data-v-d176390c]{position:relative;height:%?30?%;border-radius:%?30?%}.bgn__process-process[data-v-d176390c]{background-image:-webkit-linear-gradient(left,#ffc108,#fde586);background-image:linear-gradient(90deg,#ffc108,#fde586);background:#ffc108}.bgn__process-process.process--ani[data-v-d176390c]:after{content:"";position:absolute;width:100%;height:%?32?%;top:50%;left:0;margin-top:%?-16?%}\r\n\r\n/* 操作按钮 */.btn-container .btn-item[data-v-d176390c]{color:#fff;height:%?80?%;line-height:%?80?%;text-align:center;font-size:%?30?%;border-radius:%?15?%;-webkit-box-flex:1;-webkit-flex:1;flex:1}.btn-item__buy[data-v-d176390c]{width:%?240?%;margin-right:%?30?%;background-image:-webkit-linear-gradient(left,#fa9e1b,#fe5b1b);background-image:linear-gradient(90deg,#fa9e1b,#fe5b1b);box-shadow:#fe5b1b 0 %?22?% %?48?% %?-22?%}.btn-item__buy.complete[data-v-d176390c]{width:%?360?%;-webkit-animation:btn_anim-data-v-d176390c .9s linear infinite;animation:btn_anim-data-v-d176390c .9s linear infinite;-webkit-transform-origin:center;transform-origin:center}.btn-item__main[data-v-d176390c]{width:%?320?%;background-image:-webkit-linear-gradient(left,#fe316c,#fd584e);background-image:linear-gradient(90deg,#fe316c,#fd584e);box-shadow:#fd584e 0 %?22?% %?48?% %?-22?%;-webkit-animation:btn_anim-data-v-d176390c .9s linear infinite;animation:btn_anim-data-v-d176390c .9s linear infinite;-webkit-transform-origin:center;transform-origin:center}.btn-item-long[data-v-d176390c]{width:%?460?%}\r\n\r\n/* 按钮动画 */@-webkit-keyframes btn_anim-data-v-d176390c{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.05);transform:scale(1.05)}}@keyframes btn_anim-data-v-d176390c{0%{-webkit-transform:scale(1);transform:scale(1)}40%{-webkit-transform:scale(1.05);transform:scale(1.05)}}\r\n\r\n/* 好友助力榜 */.records-container[data-v-d176390c]{margin-top:%?44?%}.records[data-v-d176390c]{position:relative;color:#404040;box-shadow:0 %?4?% %?40?% 0 rgba(0,0,0,.08)}.records-back[data-v-d176390c]{position:absolute;left:%?-14?%;right:%?-14?%;top:%?-14?%;height:%?28?%;border-radius:%?28?%;z-index:1;background:#cb272d}.records-content[data-v-d176390c]{position:relative;z-index:2;background:#fff;padding:%?40?% %?30?%}.records-h2[data-v-d176390c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;height:%?60?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.records-h2 uni-text[data-v-d176390c]{position:relative;font-weight:700;font-size:%?34?%;line-height:%?48?%}.friend-help[data-v-d176390c]{overflow:hidden;padding:%?40?% 0 %?20?%;-webkit-transition:max-height .6s ease-out;transition:max-height .6s ease-out\r\n  /* max-height: 280rpx; */}.records-left[data-v-d176390c], .records-item[data-v-d176390c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:%?10?%}.records-left uni-image[data-v-d176390c]{width:%?80?%;height:%?80?%;border-radius:50%}.records-left uni-text[data-v-d176390c]{display:inline-block;margin-left:%?14?%}.records-left uni-text[data-v-d176390c], .records-right[data-v-d176390c]{font-size:%?28?%;line-height:%?40?%}.records-right .red[data-v-d176390c]{color:#e53a40}',""]),t.exports=i},"53ba":function(t,i,e){"use strict";e.r(i);var a=e("8914"),n=e("5891");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("de1f");var o,r=e("f0c5"),d=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"d176390c",null,!1,a["a"],o);i["default"]=d.exports},5891:function(t,i,e){"use strict";e.r(i);var a=e("0e2e"),n=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},"5f06":function(t,i,e){var a=e("4d83");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("5b71871b",a,!0,{sourceMap:!1,shadowMode:!1})},8914:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.task.task_id?e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"header dis-flex flex-x-between"},[e("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onTargetHome.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"item-touch"},[e("v-uni-text",[t._v("返回首页")])],1)],1)],1),e("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onToggleRules.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"item-touch"},[e("v-uni-text",[t._v("玩法详情")])],1)],1)],1)],1),e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"infos-wrap"},[e("v-uni-view",{staticClass:"infos-top"},[e("v-uni-view",{staticClass:"infos-img"},[e("v-uni-image",{attrs:{src:t.task.user.avatarUrl}})],1),e("v-uni-view",{staticClass:"infos-name"},[e("v-uni-text",[t._v(t._s(t.task.user.nickName))])],1)],1),e("v-uni-view",{staticClass:"infos-mask"},[t.active.prompt_words?e("v-uni-view",{staticClass:"infos-prompt"},[e("v-uni-text",[t._v(t._s(t.active.prompt_words))])],1):t._e(),e("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onTargetGoods.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"infos-item"},[e("v-uni-view",{staticClass:"infos-item-img"},[e("v-uni-image",{attrs:{src:t.goods.goods_image}})],1),e("v-uni-view",{staticClass:"infos-item-info"},[e("v-uni-view",{staticClass:"infos-item-name"},[e("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(t.goods.goods_name))])],1),e("v-uni-view",{staticClass:"infos-item-stock"},[e("v-uni-view",{staticClass:"stock-widget"},[e("v-uni-text",[t._v("仅剩"+t._s(t.goods.goods_sku.stock_num)+"件")])],1)],1),e("v-uni-view",{staticClass:"infos-item-price dis-flex flex-y-end"},[e("v-uni-text",{staticClass:"price1 col-m"},[t._v("底价¥")]),e("v-uni-text",{staticClass:"price2 col-m"},[t._v(t._s(t.task.floor_price))]),e("v-uni-text",{staticClass:"price3"},[t._v("¥"+t._s(t.task.goods_price))])],1)],1)],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"connect"},[e("v-uni-view",{staticClass:"connect-ring bgf-ring--left"},[e("v-uni-text")],1),e("v-uni-view",{staticClass:"connect-ring bgf-ring--right"},[e("v-uni-text")],1)],1),e("v-uni-view",{staticClass:"bargain-wrap"},[e("v-uni-view",{staticClass:"bargain-info"},[t.task.status?e("v-uni-view",{staticClass:"bargain-ing"},[t.task.is_floor?[e("v-uni-text",[t._v("已砍至最低")]),e("v-uni-text",{staticClass:"focal col-m"},[t._v(t._s(t.task.floor_price))]),e("v-uni-text",[t._v("元，砍价成功！")])]:[e("v-uni-text",[t._v("已砍")]),e("v-uni-text",{staticClass:"focal col-m"},[t._v(t._s(t.task.cut_money))]),e("v-uni-text",[t._v("元，还差")]),e("v-uni-text",{staticClass:"focal col-m"},[t._v(t._s(t.task.surplus_money))]),e("v-uni-text",[t._v("元")])]],2):e("v-uni-view",{staticClass:"bargain-ing"},[e("v-uni-text",{staticClass:"col-9"},[t._v("该砍价活动已结束～")])],1)],1),e("v-uni-view",{staticClass:"bgn__process m-top30"},[e("v-uni-view",{staticClass:"bgn__process-bottom"},[e("v-uni-view",{staticClass:"bgn__process-process process--ani",style:"width: "+t.task.bargain_rate+"%;"})],1)],1),e("v-uni-view",{staticClass:"btn-container m-top30 dis-flex flex-x-center"},[t.showBuyBtn?e("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onCheckout.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{class:"btn-item btn-item__buy "+(t.task.is_floor?"complete":"")},[e("v-uni-text",[t._v("立即购买")])],1)],1)],1):t._e(),t.showShareBtn?e("v-uni-button",{staticClass:"btn-normal",attrs:{"open-type":"share"}},[e("v-uni-view",{staticClass:"btn-item btn-item__main"},[e("v-uni-text",[t._v("邀请好友砍价")])],1)],1):t._e(),t.showCatBtn?e("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onHelpCut.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"btn-item btn-item__main btn-item-long"},[e("v-uni-text",[t._v("帮TA砍一刀")])],1)],1)],1):t._e(),t.showOtherBtn?e("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onTargetBargain.apply(void 0,arguments)}}},[e("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[e("v-uni-view",{staticClass:"btn-item btn-item__main btn-item-long"},[e("v-uni-text",[t._v("查看其他砍价活动")])],1)],1)],1):t._e()],1),t.task.status?e("v-uni-view",{staticClass:"bargain-p"},t._l(t.taskEndTime,(function(i,a){return e("v-uni-view",{key:a,staticClass:"bargain-people"},[e("v-uni-text",[t._v("活动还剩 "+t._s(i.dynamic.hou)+" : "+t._s(i.dynamic.min)+" : "+t._s(i.dynamic.sec)+" 结束，快来砍价吧~")])],1)})),1):t._e()],1),t.help_list.length?e("v-uni-view",{staticClass:"records-container"},[e("v-uni-view",{staticClass:"records"},[e("v-uni-view",{staticClass:"records-back"}),e("v-uni-view",{staticClass:"records-content"},[e("v-uni-view",{staticClass:"records-h2"},[e("v-uni-text",[t._v("好友助力榜")])],1),e("v-uni-view",{staticClass:"friend-help"},t._l(t.help_list,(function(i,a){return e("v-uni-view",{key:a,staticClass:"records-item"},[e("v-uni-view",{staticClass:"records-left"},[e("v-uni-image",{attrs:{src:i.user.avatarUrl}}),e("v-uni-text",[t._v(t._s(i.user.nickName))])],1),e("v-uni-view",{staticClass:"records-right semibold"},[e("v-uni-text",{staticClass:"bold"},[t._v("减")]),e("v-uni-text",{staticClass:"red"},[t._v("¥"+t._s(i.cut_money))])],1)],1)})),1)],1)],1)],1):t._e()],1),e("zan-dialog",{attrs:{id:"zan-base-dialog"}})],1):t._e()},s=[]},c61e:function(t,i,e){"use strict";var a=e("4ea4").default,n=a(e("ade3"));e("4160"),e("159b"),e("e25e");var s=a(e("ca00"));t.exports={onSetTimeList:function(t,i){var e=this,a=this,o=(new Date).getTime(),r=[];t[i].forEach((function(t){var i=new Date(s.default.format_date(t.date)).getTime(),e={hou:"00",min:"00",sec:"00"};if(i-o>0){var n=(i-o)/1e3,d=parseInt(n/3600,10),c=parseInt(n%3600/60,10),l=parseInt(n%3600%60,10);e={hou:a.timeFormat(d),min:a.timeFormat(c),sec:a.timeFormat(l)}}r.push({date:t.date,dynamic:e})})),t.setData((0,n.default)({},i,r)),setTimeout((function(){e.onSetTimeList(t,i)}),1e3)},timeFormat:function(t){return t<10?"0"+t:t}}},de1f:function(t,i,e){"use strict";var a=e("5f06"),n=e.n(a);n.a}}]);