(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-bargain-index-index"],{1168:function(t,i,a){var e=a("24fb");i=e(!1),i.push([t.i,".container[data-v-fdd5da9e]{height:100%}.bargain-hall[data-v-fdd5da9e]{padding-top:%?20?%\r\n  /* padding-bottom: 50rpx; */}\r\n\r\n/* 砍价商品 */.goods-item[data-v-fdd5da9e]{margin-bottom:%?20?%;background:#fff;padding:%?20?% %?16?%}.goods-item[data-v-fdd5da9e]:last-child{margin-bottom:0}.goods-item .goods-image uni-image[data-v-fdd5da9e]{display:block;width:%?220?%;height:%?220?%}.goods-item .goods-info[data-v-fdd5da9e]{width:%?498?%;padding-top:%?8?%;margin-left:%?15?%;position:relative}.goods-item .goods-info .goods-name[data-v-fdd5da9e]{font-size:%?28?%;min-height:%?60?%}\r\n\r\n/* 正在参与的用户 */.goods-item .goods-info .peoples[data-v-fdd5da9e]{margin-top:%?15?%}.goods-item .goods-info .peoples .user-list[data-v-fdd5da9e]{margin-right:%?10?%}.goods-item .goods-info .peoples .user-list .user-item-avatar[data-v-fdd5da9e]{margin-left:%?-8?%}.goods-item .goods-info .peoples .user-list .user-item-avatar[data-v-fdd5da9e]:first-child{margin-left:0}.goods-item .goods-info .peoples .user-list .user-item-avatar uni-image[data-v-fdd5da9e]{display:block;width:%?36?%;height:%?36?%;border-radius:50%}.goods-item .goods-info .peoples .people__text[data-v-fdd5da9e]{font-size:%?24?%;color:#818181}\r\n\r\n/* 商品原价 */.goods-item .goods-info .goods-price[data-v-fdd5da9e]{margin-top:%?15?%;color:#818181;font-size:%?25?%;text-decoration:line-through}\r\n\r\n/* 砍价底价 */.goods-item .goods-info .floor-price[data-v-fdd5da9e]{color:#fc1e56}.goods-item .goods-info .floor-price .small[data-v-fdd5da9e]{font-size:%?24?%}.goods-item .goods-info .floor-price .big[data-v-fdd5da9e]{font-size:%?32?%}\r\n\r\n/* 我的砍价 */\r\n\r\n/* 砍价进度 */.goods-item .task-rate[data-v-fdd5da9e]{font-size:%?25?%;color:#a4a4a4;margin-top:%?15?%}\r\n\r\n/* 砍价状态 */.task-status[data-v-fdd5da9e]{margin-top:%?32?%;height:%?58?%\r\n  /* line-height: 58rpx; */}.task-status__text[data-v-fdd5da9e]{font-size:%?26?%}\r\n\r\n/* 倒计时 */.count-down[data-v-fdd5da9e]{font-size:%?26?%;height:%?40?%}.count-down .clock-text[data-v-fdd5da9e]{margin-right:%?10?%}.count-down .clock-time[data-v-fdd5da9e]{background:#252525;color:#fff;padding:0 %?8?%;line-height:%?40?%;border-radius:%?8?%}.clock-symbol[data-v-fdd5da9e]{padding:0 %?8?%}\r\n\r\n/* 立即参加按钮 */.opt-touch[data-v-fdd5da9e]{position:absolute;bottom:0;right:%?10?%}.touch-btn[data-v-fdd5da9e]{color:#fff;font-size:%?28?%;background:#d3a975;border-radius:%?30?%;padding:%?10?% %?28?%}\r\n\r\n/* 底部选项卡 */.tabbar-item[data-v-fdd5da9e]{font-size:%?30?%}.tabbar-item .tabbar-item-content[data-v-fdd5da9e]{height:%?92?%}.tabbar-item.item__active .tabbar-item-content[data-v-fdd5da9e]{color:#ff1d1c}.tabbar-item  .tabbar-item-icon[data-v-fdd5da9e]{margin-right:%?15?%}\r\n\r\n/* 分割线 */.tabbar-item__divider[data-v-fdd5da9e]{padding:%?18?% 0}.divider-line[data-v-fdd5da9e]{width:%?1?%;height:100%;background:#ddd}",""]),t.exports=i},"1a6a":function(t,i,a){"use strict";a.r(i);var e=a("4699"),s=a.n(e);for(var n in e)["default"].indexOf(n)<0&&function(t){a.d(i,t,(function(){return e[t]}))}(n);i["default"]=s.a},4699:function(t,i,a){"use strict";var e=a("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("99af"),a("4160"),a("159b"),a("b64b"),a("1276"),a("ac1f");var s=a("787c"),n=e(a("c61e")),o=getApp().globalData,d={components:{},props:{},data:function(){return{currentTab:0,scrollHeight:null,scrollTop:0,noMore:!1,isLoading:!0,page:1,countDownList:[],activeList:{data:[]},myList:[]}},onLoad:function(t){this._setListHeightFun(),this._setCurrentTabFun(t),(0,s.getJSSDK)(o,window.location.href);var i=o.getShareUrlParams();(0,s.wxShare)({title:"砍价专区",desc:"砍价专区",link:o.domain+"#/pages/bargain/index/index?"+i,imgUrl:"",callback:function(){}})},onShow:function(){0===this.scrollTop&&this._getListFun()},onShareAppMessage:function(){var t=o.getShareUrlParams();return{title:"砍价专区",path:"/pages/bargain/index/index?"+t}},methods:{_setCurrentTabFun:function(t){t.hasOwnProperty("tab")&&this.setData({currentTab:t.tab})},_setListHeightFun:function(){var t=uni.getSystemInfoSync(),i=t.windowWidth/750,a=Math.floor(112*i),e=t.windowHeight-a;this.setData({scrollHeight:e})},getActiveList:function(t){var i=this;o._get("bargain.active/lists",{page:this.page||1},(function(a){var e=a.data.activeList,s=i.activeList;!0===t?i.setData({"activeList.data":s.data.concat(e.data),isLoading:!1}):i.setData({activeList:e,isLoading:!1})}))},getMyList:function(t){var i=this;o._get("bargain.task/lists",{page:this.page||1},(function(a){var e=a.data.myList,s=i.myList;!0===t?i.setData({"myList.data":s.data.concat(e.data),isLoading:!1}):i.setData({myList:e,isLoading:!1}),i._initCountDownDataFun(a.data)}))},_initCountDownDataFun:function(t){var i=this.countDownList;t.myList.data.forEach((function(t){i.push({date:t.end_time})})),this.setData({countDownList:i}),i.length>0&&n.default.onSetTimeList(this,"countDownList")},onScrollEvent:function(t){this.setData({scrollTop:t.detail.scrollTop})},onToggleTab:function(t){o.saveFormId(t.detail.formId),this.setData({currentTab:t.currentTarget.dataset.index,activeList:{data:[]},myList:[],page:1,isLoading:!0,noMore:!1}),this._getListFun()},onTargetActive:function(t,i){o.saveFormId(t.detail.formId),uni.navigateTo({url:"../goods/index?active_id="+i})},onTargetTask:function(t,i){o.saveFormId(t.detail.formId),uni.navigateTo({url:"../task/index?task_id="+i})},onScrollToLower:function(){var t=0===this.currentTab?this.activeList:this.myList;if(this.page>=t.last_page)return this.setData({noMore:!0}),!1;this.setData({page:++this.page}),this._getListFun(!0)},_getListFun:function(t){0===this.currentTab?this.getActiveList(t):this.getMyList(t)},setData:function(t){var i,a,e=this,s=[];Object.keys(t).forEach((function(n){s=n.split("."),i=t[n],a=e.$data,s.forEach((function(t,n){console.log(t),n+1===s.length?e.$set(a,t,i):a[t]||e.$set(a,t,{}),a=a[t]}))}))}}};i.default=d},"6e11":function(t,i,a){"use strict";var e;a.d(i,"b",(function(){return s})),a.d(i,"c",(function(){return n})),a.d(i,"a",(function(){return e}));var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"container"},[a("v-uni-scroll-view",{staticClass:"container--scroll-view",style:"height: "+t.scrollHeight+"px;",attrs:{"scroll-y":"true"},on:{scrolltolower:function(i){arguments[0]=i=t.$handleEvent(i),t.onScrollToLower.apply(void 0,arguments)},scroll:function(i){arguments[0]=i=t.$handleEvent(i),t.onScrollEvent.apply(void 0,arguments)}}},[0==t.currentTab?[a("v-uni-view",{staticClass:"bargain-hall"},[t._l(t.activeList.data,(function(i,e){return a("v-uni-view",{key:e,staticClass:"goods-item"},[a("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.onTargetActive(a,i.active_id)}}},[a("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-id":i.active_id}},[a("v-uni-view",{staticClass:"goods-item--container dis-flex"},[a("v-uni-view",{staticClass:"goods-image"},[a("v-uni-image",{attrs:{src:i.goods.goods_image}})],1),a("v-uni-view",{staticClass:"goods-info"},[a("v-uni-view",{staticClass:"goods-name"},[a("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(i.goods.goods_name))])],1),i.helps_count>0?a("v-uni-view",{staticClass:"peoples dis-flex"},[a("v-uni-view",{staticClass:"user-list dis-flex"},t._l(i.helps,(function(t,i){return a("v-uni-view",{key:i,staticClass:"user-item-avatar"},[a("v-uni-image",{attrs:{src:t.user.avatarUrl}})],1)})),1),a("v-uni-view",{staticClass:"people__text"},[a("v-uni-text",[t._v(t._s(i.helps_count)+"人正在砍价")])],1)],1):t._e(),a("v-uni-view",{staticClass:"goods-price"},[a("v-uni-text",[t._v("￥"+t._s(i.goods.goods_sku.goods_price))])],1),a("v-uni-view",{staticClass:"floor-price"},[a("v-uni-text",{staticClass:"small"},[t._v("最低￥")]),a("v-uni-text",{staticClass:"big"},[t._v(t._s(i.floor_price))])],1),a("v-uni-view",{staticClass:"opt-touch"},[a("v-uni-view",{staticClass:"touch-btn"},[a("v-uni-text",[t._v("立即参加")])],1)],1)],1)],1)],1)],1)],1)})),t.isLoading||t.activeList.data.length?t._e():a("v-uni-view",[a("v-uni-view",{staticClass:"yoshop-notcont"},[a("v-uni-text",{staticClass:"iconfont icon-wushuju"}),a("v-uni-text",{staticClass:"cont"},[t._v("亲，暂无砍价活动哦")])],1)],1)],2)]:t._e(),1==t.currentTab?[a("v-uni-view",{staticClass:"bargain-hall"},[t._l(t.myList.data,(function(i,e){return a("v-uni-view",{key:e,staticClass:"goods-item"},[a("v-uni-form",{attrs:{"report-submit":"true"},on:{submit:function(a){arguments[0]=a=t.$handleEvent(a),t.onTargetTask(a,i.task_id)}}},[a("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit","data-id":i.task_id}},[a("v-uni-view",{staticClass:"goods-item--container dis-flex"},[a("v-uni-view",{staticClass:"goods-image"},[a("v-uni-image",{attrs:{src:i.goods.goods_image}})],1),a("v-uni-view",{staticClass:"goods-info"},[a("v-uni-view",{staticClass:"goods-name"},[a("v-uni-text",{staticClass:"twolist-hidden"},[t._v(t._s(i.goods.goods_name))])],1),a("v-uni-view",{staticClass:"task-rate"},[i.status?[a("v-uni-text",[t._v("已砍")]),a("v-uni-text",{staticClass:"col-m"},[t._v(t._s(i.cut_money))]),a("v-uni-text",[t._v("元，")]),a("v-uni-text",[t._v("只差")]),a("v-uni-text",{staticClass:"col-m"},[t._v(t._s(i.surplus_money))]),a("v-uni-text",[t._v("元")])]:t._e(),i.is_floor?[a("v-uni-text",[t._v("已砍至最低")]),a("v-uni-text",{staticClass:"col-m"},[t._v(t._s(i.floor_price))]),a("v-uni-text",[t._v("元")])]:t._e()],2),a("v-uni-view",{staticClass:"task-status dis-flex flex-y-center"},[i.status?a("v-uni-view",{staticClass:"count-down dis-flex flex-y-center"},[a("v-uni-view",{staticClass:"clock-text"},[a("v-uni-text",[t._v("剩余")])],1),a("v-uni-view",{staticClass:"clock dis-flex"},[a("v-uni-view",{staticClass:"clock-time"},[a("v-uni-text",[t._v(t._s(t.countDownList[e].dynamic.hou))])],1),a("v-uni-view",{staticClass:"clock-symbol"},[a("v-uni-text",[t._v(":")])],1),a("v-uni-view",{staticClass:"clock-time"},[a("v-uni-text",[t._v(t._s(t.countDownList[e].dynamic.min))])],1),a("v-uni-view",{staticClass:"clock-symbol"},[a("v-uni-text",[t._v(":")])],1),a("v-uni-view",{staticClass:"clock-time"},[a("v-uni-text",[t._v(t._s(t.countDownList[e].dynamic.sec))])],1)],1)],1):t._e(),i.status?t._e():a("v-uni-view",{staticClass:"task-status__text"},[a("v-uni-text",{staticClass:"col-m"},[t._v(t._s(i.is_buy?"砍价成功":"已结束"))])],1)],1),i.status?a("v-uni-view",{staticClass:"opt-touch"},[a("v-uni-view",{staticClass:"touch-btn"},[a("v-uni-text",[t._v("继续砍价")])],1)],1):t._e()],1)],1)],1)],1)],1)})),t.noMore?a("v-uni-view",{staticClass:"no-more f-28"},[t._v("亲, 没有更多了")]):t._e(),t.isLoading||t.myList.data.length?t._e():a("v-uni-view",[a("v-uni-view",{staticClass:"yoshop-notcont"},[a("v-uni-text",{staticClass:"iconfont icon-wushuju"}),a("v-uni-text",{staticClass:"cont"},[t._v("亲，暂未参与砍价活动哦")])],1)],1)],2)]:t._e()],2),a("v-uni-view",{staticClass:"footer-fixed dis-flex"},[a("v-uni-view",{class:"tabbar-item flex-box "+(0==t.currentTab?"item__active":"")},[a("v-uni-form",{attrs:{"data-index":"0","report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onToggleTab.apply(void 0,arguments)}}},[a("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[a("v-uni-view",{staticClass:"tabbar-item-content dis-flex flex-x-center flex-y-center"},[a("v-uni-view",{staticClass:"tabbar-item-icon"},[a("v-uni-text",{staticClass:"iconfont icon-shangcheng"})],1),a("v-uni-view",{staticClass:"tabbar-item-name"},[a("v-uni-text",[t._v("砍价会场")])],1)],1)],1)],1)],1),a("v-uni-view",{staticClass:"tabbar-item__divider"},[a("v-uni-view",{staticClass:"divider-line"})],1),a("v-uni-view",{class:"tabbar-item flex-box "+(1==t.currentTab?"item__active":"")},[a("v-uni-form",{attrs:{"data-index":"1","report-submit":"true"},on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.onToggleTab.apply(void 0,arguments)}}},[a("v-uni-button",{staticClass:"btn-normal",attrs:{formType:"submit"}},[a("v-uni-view",{staticClass:"tabbar-item-content dis-flex flex-x-center flex-y-center"},[a("v-uni-view",{staticClass:"tabbar-item-icon"},[a("v-uni-text",{staticClass:"iconfont icon-sy-yh"})],1),a("v-uni-view",{staticClass:"tabbar-item-name"},[a("v-uni-text",[t._v("我的砍价")])],1)],1)],1)],1)],1)],1)],1)},n=[]},9211:function(t,i,a){var e=a("1168");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var s=a("4f06").default;s("712e371f",e,!0,{sourceMap:!1,shadowMode:!1})},adc1:function(t,i,a){"use strict";a.r(i);var e=a("6e11"),s=a("1a6a");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(i,t,(function(){return s[t]}))}(n);a("ba2e");var o,d=a("f0c5"),r=Object(d["a"])(s["default"],e["b"],e["c"],!1,null,"fdd5da9e",null,!1,e["a"],o);i["default"]=r.exports},ba2e:function(t,i,a){"use strict";var e=a("9211"),s=a.n(e);s.a},c61e:function(t,i,a){"use strict";var e=a("4ea4").default,s=e(a("ade3"));a("4160"),a("159b"),a("e25e");var n=e(a("ca00"));t.exports={onSetTimeList:function(t,i){var a=this,e=this,o=(new Date).getTime(),d=[];t[i].forEach((function(t){var i=new Date(n.default.format_date(t.date)).getTime(),a={hou:"00",min:"00",sec:"00"};if(i-o>0){var s=(i-o)/1e3,r=parseInt(s/3600,10),c=parseInt(s%3600/60,10),u=parseInt(s%3600%60,10);a={hou:e.timeFormat(r),min:e.timeFormat(c),sec:e.timeFormat(u)}}d.push({date:t.date,dynamic:a})})),t.setData((0,s.default)({},i,d)),setTimeout((function(){a.onSetTimeList(t,i)}),1e3)},timeFormat:function(t){return t<10?"0"+t:t}}}}]);