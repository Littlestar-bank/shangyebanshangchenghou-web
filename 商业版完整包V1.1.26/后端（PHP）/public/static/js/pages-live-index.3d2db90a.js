(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-live-index"],{"6ade":function(t,a,e){"use strict";e.r(a);var i=e("7718"),n=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},7718:function(t,a,e){"use strict";var i=e("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("ade3"));e("99af"),e("4160"),e("159b"),e("b64b"),e("1276"),e("ac1f");var s=i(e("ca00")),o=getApp().globalData,r={101:{name:"直播中",value:101},102:{name:"未开始",value:102},103:{name:"已结束",value:103},104:{name:"禁播",value:104},105:{name:"暂停中",value:105},106:{name:"异常",value:106},107:{name:"已过期",value:107}},c={components:{},props:{},data:function(){return{scrollHeight:0,list:{data:[]},page:1,isLoading:!0,isLastPage:!1}},onLoad:function(){this.setListHeight(),this.getLiveRoomList()},onShow:function(){},methods:{getLiveRoomList:function(t,a){var e=this;o._get("live.room/lists",{page:a||1},(function(a){var i=a.data.list,n=e.list;!0===t?e.setData({"list.data":n.data.concat(i.data),isLoading:!1}):e.setData({list:i,isLoading:!1,isLastPage:!1})}))},setLiveStatusText:function(t){var a=requirePlugin("live-player-plugin"),e=this,i=e.list.data.length-t.data.length;return t.data.forEach((function(t,s){var o=i+s,c=e.list.data[o],l="list.data["+o+"]";a.getLiveStatus({room_id:c["room_id"]}).then((function(t){var a,i=t.liveStatus,s=r[i]["name"],o=s;101===i?s="正在直播中":102===i&&(s=e.semanticStartTime(c.start_time)+" 开播"),e.setData((a={},(0,n.default)(a,l+".live_status",i),(0,n.default)(a,l+".live_status_text_1",s),(0,n.default)(a,l+".live_status_text_2",o),a))})).catch((function(){}))})),t},semanticStartTime:function(t){var a=new Date(s.default.format_date(t)),e=s.default.dateFormat("YYYYmmdd",a),i=s.default.dateFormat("YYYYmmdd",new Date),n=new Date;n.setTime(n.getTime()+864e5);var o=s.default.dateFormat("YYYYmmdd",n);return e===i?s.default.dateFormat("今天HH:MM",a):e===o?s.default.dateFormat("明天HH:MM",a):s.default.dateFormat("mm/dd HH:MM",a)},onPageDown:function(){var t=this;if(t.page>=t.list.last_page)return t.setData({isLastPage:!0}),!1;t.getLiveRoomList(!0,++t.page)},setListHeight:function(){var t=this,a=uni.getSystemInfoSync();t.setData({scrollHeight:.98*a.windowHeight})},onTargetLiveRoomIndex:function(t){var a=t.currentTarget.dataset.id,e={path:"pages/index/index"};uni.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id="+a+"&custom_params="+encodeURIComponent(JSON.stringify(e))})},onShareAppMessage:function(){return{title:"直播列表",path:"/pages/live/index?"+o.getShareUrlParams()}},setData:function(t){var a,e,i=this,n=[];Object.keys(t).forEach((function(s){n=s.split("."),a=t[s],e=i.$data,n.forEach((function(t,s){console.log(t),s+1===n.length?i.$set(e,t,a):e[t]||i.$set(e,t,{}),e=e[t]}))}))}}};a.default=c},"8d1e":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,".live-room-item[data-v-1cb2f4ac]{width:%?710?%;margin:0 auto %?20?% auto;padding:%?25?% %?24?%;background:#fff;border-radius:%?5?%;box-sizing:border-box;box-shadow:0 %?2?% %?4?% 0 rgba(0,0,0,.05)}.live-room-item[data-v-1cb2f4ac]:first-child{margin-top:%?20?%}.room-head[data-v-1cb2f4ac]{color:#b6b6b6;line-height:%?40?%}.room-head .live-status_icon[data-v-1cb2f4ac]{margin-right:%?15?%;font-size:%?34?%}.room-head .live-status_text[data-v-1cb2f4ac]{font-size:%?26?%}\r\n\r\n/* 直播中 */.live-status__101 .room-head[data-v-1cb2f4ac]{color:#db384b}.live-status__102 .room-head[data-v-1cb2f4ac]{color:#db384b}\r\n\r\n/* 房间名称 */.room-name[data-v-1cb2f4ac]{margin-top:%?10?%;font-size:%?28?%}\r\n\r\n/* 房间封面图 */.room-cover[data-v-1cb2f4ac]{margin-top:%?15?%}.room-cover uni-image[data-v-1cb2f4ac]{display:block;width:100%;height:%?371?%}\r\n\r\n/* 主播信息 */.room-anchor[data-v-1cb2f4ac]{margin-top:%?20?%}.room-anchor .anchor-avatar[data-v-1cb2f4ac]{margin-right:%?12?%}.room-anchor .anchor-avatar uni-image[data-v-1cb2f4ac]{display:block;width:%?45?%;height:%?45?%;border-radius:50%}.anchor-name[data-v-1cb2f4ac]{font-size:%?26?%}.live-status_text2[data-v-1cb2f4ac]{color:#b6b6b6;font-size:%?26?%}\r\n\r\n/* 直播中 */.live-status__101 .live-status_text2[data-v-1cb2f4ac]{color:#db384b}.live-status__102 .live-status_text2[data-v-1cb2f4ac]{color:#db384b}",""]),t.exports=a},"9fef":function(t,a,e){var i=e("8d1e");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("1d21bbb5",i,!0,{sourceMap:!1,shadowMode:!1})},b077:function(t,a,e){"use strict";e.r(a);var i=e("ef06"),n=e("6ade");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("ed9d");var o,r=e("f0c5"),c=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"1cb2f4ac",null,!1,i["a"],o);a["default"]=c.exports},ed9d:function(t,a,e){"use strict";var i=e("9fef"),n=e.n(i);n.a},ef06:function(t,a,e){"use strict";var i;e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"container"},[t.list.data.length>0?e("v-uni-view",{staticClass:"live-room-list"},[e("v-uni-scroll-view",{style:"height: "+t.scrollHeight+"px",attrs:{"scroll-y":"true"},on:{scrolltolower:function(a){arguments[0]=a=t.$handleEvent(a),t.onPageDown.apply(void 0,arguments)}}},[t._l(t.list.data,(function(a,i){return e("v-uni-view",{key:i,class:"live-room-item live-status__"+a.live_status,attrs:{"data-id":a.room_id},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.onTargetLiveRoomIndex.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"room-head dis-flex flex-y-center"},[101==a.live_status?e("v-uni-text",{staticClass:"live-status_icon iconfont icon-zhibozhong"}):t._e(),102==a.live_status?e("v-uni-text",{staticClass:"live-status_icon iconfont icon-shijian-s"}):t._e(),a.live_status>=103?e("v-uni-text",{staticClass:"live-status_icon iconfont icon-shipin"}):t._e(),e("v-uni-text",{staticClass:"live-status_text"},[t._v(t._s(a.live_status_text_1))])],1),e("v-uni-view",{staticClass:"room-name onelist-hidden"},[e("v-uni-text",[t._v(t._s(a.room_name))])],1),e("v-uni-view",{staticClass:"room-cover"},[e("v-uni-image",{attrs:{src:a.share_img,mode:"aspectFill"}})],1),e("v-uni-view",{staticClass:"room-anchor dis-flex"},[e("v-uni-view",{staticClass:"lay-left flex-box dis-flex flex-y-center"},[e("v-uni-view",{staticClass:"anchor-avatar"},[e("v-uni-image",{attrs:{src:a.share_img,mode:"aspectFill"}})],1),e("v-uni-view",{staticClass:"anchor-name"},[e("v-uni-text",[t._v(t._s(a.anchor_name))])],1)],1),e("v-uni-view",{staticClass:"lay-right"},[e("v-uni-text",{staticClass:"live-status_text2"},[t._v(t._s(a.live_status_text_2))])],1)],1)],1)})),t.isLastPage?e("v-uni-view",{staticClass:"no-more f-28"},[t._v("亲, 没有更多了")]):t._e()],2)],1):t._e(),t.list.data.length||t.isLoading?t._e():e("v-uni-view",{staticClass:"yoshop-notcont"},[e("v-uni-text",{staticClass:"iconfont icon-wushuju"}),e("v-uni-text",{staticClass:"cont"},[t._v("亲，暂无直播间哦")])],1)],1)},s=[]}}]);